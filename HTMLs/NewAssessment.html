<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>Dashboard Template for Bootstrap</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/NewAssessment.css" rel="stylesheet">
    <link href="../css/NavBar.css" rel="stylesheet">
    <link href="../pruebaCSS/jquery-ui.css" rel="stylesheet">
    <script src="../prueba-js/jquery.js"></script>
    <script src="../prueba-js/jquery-ui.js"></script>
    <script src="../prueba-js/jQueryRotateCompressed.2.2.js" type="text/javascript"></script>

</head>

<body class="my-body">

    <!------------------------------------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------------------------------------------------------------>
    <!-------------------------Navigation Bar ---------------------------->

    <div class="navbar navbar-inverse navbar-fixed-top my-nav-bar">
        <div class="container">
            <div class="row">
                <div id="my-nav-bar-home-but" class="col-md-1" >
                    <a href="Home.html"><button><span class="glyphicon glyphicon-home"></span></button></a>
                </div>
                <div id="my-nav-bar-elem-nav" class="col-md-10">
                    <ul>
                        <a href="#"><li>About</li></a>
                        <a href="#"><li>Contact</li></a>
                    </ul>
                </div>
                <div id="my-nav-bar-options" class="col-md-1">
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
                            <span class="glyphicon glyphicon-align-justify"></span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="dropdownMenu1">
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Action</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Another action</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Something else here</a></li>
                            <li role="presentation" class="divider"></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Separated link</a></li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <!------------------------------------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------------------------------------------------------------>
    <!-------------------------Begin MC Question Model ---------------------------->

            <div  id="mc-question-0" class="row mult-choice" hidden="hidden">
                <div class="col-md-1">
                </div>
                <div class="col-md-2 num-quest-label">
                    <div>
                        <h3>Q1</h3>
                    </div>
                </div>
                <div class="col-md-1 my-quest-close-but">
                    <div>
                        <a href=""><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button></a>
                    </div>
                </div>
                <div class="col-md-8 my-quest-panel">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="input-group">
                                <span class="input-group-addon">Question</span>
                                <input type="text" class="form-control input-quest" placeholder="Write your question here...">
                            </div>
                        </div>

                        <div class="my-quest-panel-ans">
                            <div id="mc-append-opt-here-0" class="panel-body">
                                <div class="input-group">
                                    <span class="input-group-addon">Option 1</span>
                                    <input type="text" class="form-control" placeholder="Write an option...">
                                                <span class="input-group-addon">
                                                    <input type="checkbox">
                                                </span>
                                                <span class="input-group-addon">
                                                </span>
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon">Option 2</span>
                                    <input type="text" class="form-control" placeholder="Write an option...">
                                    <span class="input-group-addon">
                                        <input type="checkbox">
                                    </span>
                                    <span class="input-group-addon">
                                    </span>
                                </div>
                            </div>

                            <div class="panel-body my-quest-panel-optbut">
                                <div class="input-group" >
                                    <p>
                                        <a href="" class="btn btn-primary" role="button">
                                                            <span class="glyphicon glyphicon-plus">
                                                            </span>
                                            Option
                                        </a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-1 my-quest-move-but">
                    <div>
                        <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-arrow-up"></span></button></a>
                    </div>
                    <div >
                        <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-arrow-down"></span></button></a>

                    </div>
                </div>
            </div>

    <!------------------------------------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------------------------------------------------------------>
    <!-------------------------Begin TF Question Model ---------------------------->

            <div  id="tf-question-0" class="row true-false" hidden="hidden">
                <div class="col-md-1">
                </div>
                <div class="col-md-2 num-quest-label">
                    <div>
                        <h3>Q1</h3>
                    </div>
                </div>
                <div class="col-md-1 my-quest-close-but">
                    <div >
                        <a href=""><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button></a>
                    </div>
                </div>
                <div class="col-md-8 my-quest-panel">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="input-group">
                                <span class="input-group-addon">Question</span>
                                <input type="text" class="form-control input-quest" placeholder="Write your question here...">
                            </div>
                        </div>

                        <div class="panel-body my-quest-panel-ans">
                            <div class="input-group" >
                                    <div class="btn-group-vertical">
                                        <div class="my-btn-true">
                                            <span class="input-group-addon">
                                                <input type="radio">
                                            </span>
                                            <p class="input-group-addon">True</p>
                                        </div>
                                        <div class="my-btn-false" >
                                            <span class="input-group-addon">
                                                <input type="radio" >
                                            </span>
                                            <p class="input-group-addon">False</p>
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-1 my-quest-move-but">
                    <div>
                        <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-arrow-up"></span></button></a>
                    </div>
                    <div >
                        <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-arrow-down"></span></button></a>

                    </div>
                </div>
            </div>


    <!------------------------------------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------------------------------------------------------------>
    <!-------------------------Begin SA Question Model ---------------------------->

            <div  id="sa-question-0" class="row short-answer" hidden="hidden">
                <div class="col-md-1">
                </div>
                <div class="col-md-2 num-quest-label">
                    <div>
                        <h3>Q1</h3>
                    </div>
                </div>
                <div class="col-md-1 my-quest-close-but">
                    <div>
                        <a href=""><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button></a>
                    </div>
                </div>
                <div class="col-md-8 my-quest-panel">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="input-group">
                                <span class="input-group-addon">Question</span>
                                <input type="text" class="form-control input-quest" placeholder="Write your question here...">
                            </div>
                        </div>
                        <div class="panel-body my-quest-panel-ans">
                            <p>Open Question</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-1 my-quest-move-but">
                    <div>
                        <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-arrow-up"></span></button></a>
                    </div>
                    <div >
                        <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-arrow-down"></span></button></a>

                    </div>
                </div>
            </div>

    <!------------------------------------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------------------------------------------------------------>
    <!-------------------------Begin MCP Question Model ---------------------------->

    <div  id="mcp-question-0" class="row mult-choice-pic" hidden="hidden">
        <div class="col-md-1">
        </div>
        <div class="col-md-2 num-quest-label">
            <div>
                <h3>Q1</h3>
            </div>
        </div>
        <div class="col-md-1 my-quest-close-but">
            <div>
                <a href=""><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button></a>
            </div>
        </div>
        <div class="col-md-8 my-quest-panel">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="input-group">
                        <span class="input-group-addon">Question</span>
                        <input type="text" class="form-control input-quest" placeholder="Write your question here...">
                    </div>
                </div>

                <div class="my-quest-panel-ans">
                    <div class="panel-body">
                        <div class="row" id="mcp-append-opt-here-0">
                        </div>
                    </div>
                    <div class="panel-body my-quest-panel-optbut">
                        <div class="input-group">
                            <div class="fileUpload btn btn-primary">
                                <span class="glyphicon glyphicon-plus"></span>
                                <span>Add Images</span>
                                <input type="file" class="upload" multiple accept="image/*">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-1 my-quest-move-but">
            <div>
                <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-arrow-up"></span></button></a>
            </div>
            <div >
                <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-arrow-down"></span></button></a>

            </div>
        </div>
    </div>

                <!-- OPTION-->
                <div class="col-md-3 mult-pic-opt-panel" id="mcp-option-0-q-0" hidden="hidden">
                    <span class="">
                        <input type="radio">
                    </span>
                    <span class="">Option 1</span>
                    <div class="mcp-pic-panel">
                        <div>
                            <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button></a>
                        </div>
                    </div>
                </div>


    <!------------------------------------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------------------------------------------------------------>
    <!-------------------------Begin Label Question Model ---------------------------->

    <div  id="label-question-0" class="row label-quest" hidden="hidden">
        <div class="col-md-1">
        </div>
        <div class="col-md-2 num-quest-label">
            <div>
                <h3>Q1</h3>
            </div>
        </div>
        <div class="col-md-1 my-quest-close-but">
            <div>
                <a href=""><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button></a>
            </div>
        </div>
        <div class="col-md-8 my-quest-panel">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="input-group">
                        <span class="input-group-addon">Question</span>
                        <input type="text" class="form-control input-quest" placeholder="Write your question here...">
                    </div>
                </div>

                <div class="my-quest-panel-ans">
                    <div class="panel-body">
                        <div class="col-md-12" style="padding: 15px 0px 0px 0px;">
                            <div class="col-md-12" id="append-labels-here-0">
                            </div>
                            <div class="col-md-12" id="append-lines-here-0">
                            </div>
                            <div id="fileDisplayArea-0" style="border-radius: 7px; padding-left: 80px; padding-right: 80px;">
                            </div>
                        </div>
                    </div>
                    <div class="panel-body my-quest-panel-optbut">
                        <div class="fileUpload btn btn-primary">
                            <span>Upload Image</span>
                            <input type="file" id="fileInputLab-0" class="upload" accept="image/*">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-1 my-quest-move-but">
            <div>
                <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-arrow-up"></span></button></a>
            </div>
            <div >
                <a href="#"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-arrow-down"></span></button></a>

            </div>
        </div>
    </div>

    <div class="draggable" id="label-0-q-0" hidden="hidden">
        <div class="input-group">
            <span class="input-group-addon" style="padding: 1px 7px 1px 7px; font-size:12px; cursor:move; font-weight:600;">A</span>
            <input type="text" class="form-control" placeholder="Write an option..." style="height:20px; font-size: 12px;">
        <span class="input-group-addon" style="padding: 0px; width:20px; font-size:12px; background-color:white;">
            <a href="#">
                <span class="glyphicon glyphicon-remove"></span>
            </a>
        </span>
        </div>
    </div>

    <!------------------------------------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------------------------------------------------------------>





    <div id="my-panel-title-act-but" hidden="hidden">
        <a href="javascript:ToggleCollapseQuest()"><button><span id="act-but-toggle-collapse" class="glyphicon glyphicon-menu-up"></span></button></a>
    </div>

    <div class="container my-panel-title">
        <div class="row" >
                <h1>New Assessment</h1>
        </div>
    </div>


    <div class="container my-panel-thumbnails">
            <div class="row" id="new-assess-start">
                <h1>Pick a type for your first question!</h1>
            </div>

            <div class="row" id="new-assess-thumbnails-start">
                <div class="col-sm-6 col-md-3">
                    <div class="thumbnail">
                        <a href="javascript:HideThumbnails('mult-choice')">
                            <img src="../img/Multiple%20Choice.png" alt="New">
                        </a>
                        <div class="caption" >
                            <h3>Multiple Choice</h3>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-3">
                    <div class="thumbnail">
                        <a href="javascript:HideThumbnails('true-false')">
                            <img src="../img/True%20False.png" alt="Start">
                        </a>
                        <div class="caption">
                            <h3>True/False</h3>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-3">
                    <div class="thumbnail">
                        <a href="javascript:HideThumbnails('short-answer')">
                            <img src="../img/Open%20question.png" alt="Manage">
                        </a>
                        <div class="caption">
                            <h3>Short Answer</h3>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-3">
                    <div class="thumbnail">
                        <a href="javascript:HideThumbnails('multiple-pictures')">
                            <img src="../img/Multiple%20Pics.png" alt="Manage">
                        </a>
                        <div class="caption">
                            <h3>Multiple Pictures</h3>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-3">
                    <div class="thumbnail">
                        <a href="javascript:HideThumbnails('label-quest')">
                            <img src="../img/Label.png" alt="Manage">
                        </a>
                        <div class="caption">
                            <h3>Multiple Pictures</h3>
                        </div>
                    </div>
                </div>
            </div>
    </div>


    <div class="container" id="append-quest-here">
    </div>

    <div class="container" id ="buttons-next-quest" hidden="hidden">
        <div class="row">
            <div class="col-md-6" id="new-assess-thumbnails-other-quest">
                <div class="row">
                    <div class="col-sm-4 col-md-2">
                        <div class="thumbnail">
                            <a href="javascript:AddQuestion('label-quest')">
                                <img src="../img/Label.png" alt="New">
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-4 col-md-2">
                        <div class="thumbnail">
                            <a href="javascript:AddQuestion('multiple-pictures')">
                                <img src="../img/Multiple%20Pics.png" alt="Manage">
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-4 col-md-2">
                        <div class="thumbnail">
                            <a href="javascript:AddQuestion('short-answer')">
                                <img src="../img/Open%20question.png" alt="Manage">
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-4 col-md-2">
                        <div class="thumbnail">
                            <a href="javascript:AddQuestion('true-false')">
                                <img src="../img/True%20False.png" alt="Start">
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-4 col-md-2">
                        <div class="thumbnail">
                            <a href="javascript:AddQuestion('mult-choice')">
                                <img src="../img/Multiple%20Choice.png" alt="New">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>   <!--Cambiar el orden de los thumbnails para que sea coherente-->



<!---------------------- Function Add Question  ------------------------>

<script type="text/javascript">

    function AddQuestion(type) {

            var div2AppendQuest = document.getElementById("append-quest-here");
            var questNumAQ = div2AppendQuest.childElementCount;

            questNumAQ++;

            if (type == "mult-choice"){
                $("#mc-question-0").clone().appendTo("#append-quest-here");
                $("#append-quest-here #mc-question-0").attr("id", String("question-" + questNumAQ));
            }else if (type == "true-false") {
                $("#tf-question-0").clone().appendTo("#append-quest-here");
                $("#append-quest-here #tf-question-0").attr("id", String("question-" + questNumAQ));
            }else if (type == "short-answer") {
                $("#sa-question-0").clone().appendTo("#append-quest-here");
                $("#append-quest-here #sa-question-0").attr("id", String("question-" + questNumAQ));
            } else if (type == "multiple-pictures"){
                $("#mcp-question-0").clone().appendTo("#append-quest-here");
                $("#append-quest-here #mcp-question-0").attr("id", String("question-" + questNumAQ));
            } else if (type == "label-quest"){
                $("#label-question-0").clone().appendTo("#append-quest-here");
                $("#append-quest-here #label-question-0").attr("id", String("question-" + questNumAQ));
            }

            javascript:ReWriteTags(questNumAQ);
            $(String("#question-" + questNumAQ)).removeAttr("hidden");
            autoScrollToNextQuest(questNumAQ);
        }

</script>

<!---------------------- Function Remove Question ------------------------>

<script type="text/javascript">

    function RemoveQuestion(questNumRQ) {

        var getQuest2Remove;
        var check;
        var howManyQuestLeft;
        var x = 0;

            check = confirm("Do you really want to delete this question and all of its contents?");

            if (check == true) {
                getQuest2Remove = document.getElementById(String("question-" + questNumRQ));
                $(String("#question-" + questNumRQ)).fadeOut(400);

                setTimeout(function(){          /*El resto de la función tiene que ir dentro del setTimeout para que todas las lineas se ejecuten después del delay y no se salte a las demás durante el delay */
                    getQuest2Remove.remove();

                    howManyQuestLeft = document.getElementById("append-quest-here").childElementCount;

                    for (j = 0; j < howManyQuestLeft; j++) {
                        x++;
                        $(String("#append-quest-here>div:nth-child(" + x + ")")).attr("id", String("question-" + x));

                        ReWriteTags(x);
                    }

                    if (howManyQuestLeft<1){
                        ShowThumbnails();
                        $(".my-quest-panel-ans").show();
                    }
                },401);
            }
    }

</script>

<!---------------------- Function ReWrite Tags ------------------------>

<script type="text/javascript">

    function ReWriteTags(questNumRT){
            var numOpts = 0;
            var x = 0;

            $(String("#question-" + questNumRT + " .num-quest-label div h3")).attr("id",String("label-" + questNumRT)).text(String("Q" + questNumRT));
            $(String("#question-" + questNumRT +  " .my-quest-close-but div a")).attr("href", String("javascript:RemoveQuestion(" + questNumRT + ")"));
            $(String("#question-" + questNumRT +  " .my-quest-move-but div:first-child a")).attr("href", String("javascript:ReorderQuestion(" + questNumRT + ",'up')"));
            $(String("#question-" + questNumRT +  " .my-quest-move-but div:nth-child(2) a")).attr("href", String("javascript:ReorderQuestion(" + questNumRT + ",'down')"));

            var questClass = document.getElementById(String("question-" + questNumRT)).className;

            if (questClass == "row mult-choice"){
                $(String("#question-" + questNumRT +  " [id^='mc-append-opt-here']")).attr("id", String("mc-append-opt-here-" + questNumRT));
                $(String("#question-" + questNumRT + " .my-quest-panel-optbut div p a")).attr("href",String("javascript:AddOption(" + questNumRT + ")"));

                numOpts = document.getElementById(String("mc-append-opt-here-" + questNumRT)).childElementCount;

                for (i=0; i < numOpts; i++){
                    x++;
                    $(String("#mc-append-opt-here-" + questNumRT + ">div:nth-child(" + x + ")")).attr("id",String("mc-option-" + x + "-q-" + questNumRT));

                    if (x > 2){
                        $(String("#mc-option-" + x + "-q-" + questNumRT + ">span:last-child a")).attr("href",String("javascript:RemoveOption(" + x + "," + questNumRT + ")"));
                    }
                }


            } 
            
            else if (questClass == "row true-false"){
                $(String("#question-" + questNumRT + " .my-btn-true span input")).attr("name", String("true-false" + questNumRT));
                $(String("#question-" + questNumRT + " .my-btn-false span input")).attr("name", String("true-false" + questNumRT));
            } 
            
            else if (questClass == "row mult-choice-pic"){
                $(String("#question-" + questNumRT +  " [id^='mcp-append-opt-here']")).attr("id", String("mcp-append-opt-here-" + questNumRT));
                $(String("#question-" + questNumRT +  " .fileUpload input")).attr("id", String("mcp-add-pics-" + questNumRT));
                $(String("#mcp-add-pics-" + questNumRT)).attr("onchange","UploadMCP(" + questNumRT + ")");
                numOpts = document.getElementById(String("mcp-append-opt-here-" + questNumRT )).childElementCount;

                for (i=0; i < numOpts; i++){
                    x++;
                    $(String("#mcp-append-opt-here-" + questNumRT + ">div:nth-child(" + x + ")")).attr("id",String("mcp-option-" + x + "-q-" + questNumRT));
                    $(String("#mcp-option-" + x + "-q-" + questNumRT + ">span>input")).attr("name",String("mcp-pic-" + questNumRT));
                    $(String("#mcp-option-" + x + "-q-" + questNumRT + " .mcp-pic-panel>div:first-child")).attr("id",String("mcp-picHolder-" + x + "-q-" + questNumRT));
                    $(String("#mcp-picHolder-" + x + "-q-" + questNumRT + ">a")).attr("href", String("javascript:RemoveOption(" + x + "," + questNumRT + ")"));
                }

            } 
            
            else if (questClass == "row label-quest"){
                $(String("#question-" + questNumRT + " [id^='append-labels-here']")).attr("id",String("append-labels-here-" + questNumRT));
                $(String("#question-" + questNumRT + " [id^='append-lines-here']")).attr("id",String("append-lines-here-" + questNumRT));
                $(String("#question-" + questNumRT + " [id^='fileDisplayArea']")).attr("id",String("fileDisplayArea-" + questNumRT));
                $(String("#question-" + questNumRT + " [id^='fileInputLab']")).attr("id",String("fileInputLab-" + questNumRT));
                $(String("#fileInputLab-" + questNumRT)).attr("onchange","UploadLabelImage(" + questNumRT + ")");

                var numLabels = document.getElementById(String("append-labels-here-" + questNumRT )).childElementCount;

                if( numLabels > 0){
                    for (i=0; i < numLabels; i++){
                        x++;
                        $(String("#append-labels-here-" + questNumRT + ">div:nth-child(" + x + ")")).attr("id",String("label-" + x + "-q-" + questNumRT));
                        $(String("#append-lines-here-" + questNumRT + ">div:nth-child(" + x + ")")).attr("id",String("line-" + x + "-q-" + questNumRT));
                    }

                }

            }
        }

</script>

<!---------------------- Function ReOrder Question ------------------------>

<script type="text/javascript">

    function ReorderQuestion(questNumRQ,direction){

            var quest2Move;
            var quest2Displace;
            var refID;
            var nextID;
            var nextPos;

            quest2Move = document.getElementById(String("question-" + questNumRQ));

            if (direction == "up" && questNumRQ > 1){

                quest2Displace = quest2Move.previousSibling;
                $("#question-" + questNumRQ).fadeOut(400);
                setTimeout(function(){
                    quest2Move.parentNode.insertBefore(quest2Move,quest2Displace);
                    refID = quest2Move.id;
                    nextID = quest2Displace.id;
                    nextPos = questNumRQ - 1;
                },405);

            }else if (direction == "down" &&  questNumRQ < (document.getElementById("append-quest-here").childElementCount) ){

                quest2Displace = quest2Move.nextSibling;
                $("#question-" + questNumRQ).fadeOut(400);
                setTimeout(function(){
                    quest2Displace.parentNode.insertBefore(quest2Displace,quest2Move);
                    refID = quest2Move.id;
                    nextID = quest2Displace.id;
                    nextPos = questNumRQ + 1;
                },405);

            }

            if (quest2Displace){

                setTimeout(function(){
                    $(String("#append-quest-here>div:nth-child(" + nextPos + ")")).attr("id", nextID);
                    $(String("#append-quest-here>div:nth-child(" + questNumRQ + ")" )).attr("id", refID);
                    javascript:ReWriteTags(nextPos);
                    javascript:ReWriteTags(questNumRQ);
                    $("#question-" + nextPos).fadeIn(1000);
                },410);

                setTimeout(function(){
                    autoScrollQuestUpDown(nextID);
                },410);

            }

        }

</script>

<!---------------------- Add Option from Questions Javascript ------------------------>

<script type="text/javascript">

    function AddOption(questNumAO) {  /*ONLY for MC type of questions*/

        var nextOptNum = document.getElementById(String("mc-append-opt-here-"+ questNumAO)).childElementCount + 1;

        $("#mc-append-opt-here-0>div:first-child").clone().appendTo(String("#mc-append-opt-here-" + questNumAO));
        $(String("#mc-append-opt-here-" + questNumAO + ">div:last-child")).attr("id",String("mc-option-" + nextOptNum + "-q-" + questNumAO));
        $(String("#mc-append-opt-here-" + questNumAO + ">div:last-child>span:first-child")).text(String("Option " + nextOptNum));

        var iconRemOpt = document.createElement("span");
        var link2RemOpt = document.createElement("a");
        iconRemOpt.className = "glyphicon glyphicon-remove";
        link2RemOpt.href = String("javascript:RemoveOption(" + nextOptNum + "," + questNumAO + ")");
        link2RemOpt.appendChild(iconRemOpt);
        $(String("#mc-option-" + nextOptNum + "-q-" + questNumAO + ">span:last-child")).append(link2RemOpt);
    }

</script>

<!---------------------- Remove Option from Questions Javascript ------------------------>

<script type="text/javascript">

    function RemoveOption(optNum,questNumRO) {   /*For both MC type of questions and MCP*/
            var x;
            var howManyNewOpt;
            var getOpt2Remove;

            if (document.getElementById(String("question-" + questNumRO)).className == "row mult-choice"){
                x = 2;
                getOpt2Remove = document.getElementById(String("mc-option-" + optNum + "-q-" + questNumRO));
                getOpt2Remove.remove();

                howManyNewOpt = document.getElementById("mc-append-opt-here-" + questNumRO).childElementCount-2;

                for (i = 0; i < howManyNewOpt; i++) {
                    x++;
                    $(String("#mc-append-opt-here-" + questNumRO + " div:nth-child(" + x + ") span:contains('Option')")).text(String("Option " + x));
                    $(String("#mc-append-opt-here-" + questNumRO + " div:nth-child(" + x + ")")).attr("id", String("mc-option-" + x + "-q-" + questNumRO ));
                    $(String("#mc-append-opt-here-" + questNumRO + " div:nth-child(" + x + ") span a")).attr("href", String("javascript:RemoveOption(" +  x + "," + questNumRO + ")"));
                }

            } else if (document.getElementById(String("question-" + questNumRO)).className == "row mult-choice-pic"){
                x = 0;
                getOpt2Remove = document.getElementById(String("mcp-option-" + optNum + "-q-" + questNumRO));
                $(String("#mcp-option-" + optNum + "-q-" + questNumRO)).fadeOut(500);

                setTimeout(function(){
                    getOpt2Remove.remove();

                    howManyNewOpt = document.getElementById("mcp-append-opt-here-" + questNumRO).childElementCount;

                    for (i = 0; i < howManyNewOpt; i++) {
                        x++;
                        $(String("#mcp-append-opt-here-" + questNumRO + " div:nth-child(" + x + ") span:contains('Option')")).text(String("Option " + x));
                        $(String("#mcp-append-opt-here-" + questNumRO + " div:nth-child(" + x + ")")).attr("id", String("mcp-option-" + x + "-q-" + questNumRO ));
                        $(String("#mcp-option-" + x + "-q-" + questNumRO + " .mcp-pic-panel>div:first-child")).attr("id",String("mcp-picHolder-" + x + "-q-" + questNumRO));
                        $(String("#mcp-picHolder-" + x + "-q-" + questNumRO + ">a")).attr("href", String("javascript:RemoveOption(" + x + "," + questNumRO + ")"));
                    }
                    if (howManyNewOpt >2){
                        $(String("#question-" + questNumRO + " .fileUpload")).removeAttr("disabled","disabled");
                    }
                },501);
            }
        }

</script>


<!---------------------- Hide / Show Thumbnails Javascript ------------------------>


<script type="text/javascript">

    function HideThumbnails(type){
            $(".my-panel-thumbnails").hide(0,AddQuestion(type));
            $("#buttons-next-quest").removeAttr("hidden");
            $("#my-panel-title-act-but").removeAttr("hidden");

        }
    function ShowThumbnails(){
            $(".my-panel-thumbnails").show();
            $("#buttons-next-quest").attr("hidden","hidden");
            $("#my-panel-title-act-but").attr("hidden","hidden");
        }

</script>


    <!---------------------- Toggle Collapse Javascript ------------------------>

<script type="text/javascript">

    function ToggleCollapseQuest(){
        $(".my-quest-panel-ans").toggle();

        if (document.getElementById("act-but-toggle-collapse").className == "glyphicon glyphicon-menu-up") {
            document.getElementById("act-but-toggle-collapse").className = "glyphicon glyphicon-menu-down";
        }else {
            document.getElementById("act-but-toggle-collapse").className = "glyphicon glyphicon-menu-up";
        }
    }

</script>


    <!---------------------- AutoScroll NEXT QUESTION Javascript ------------------------>


<script type="text/javascript">

    function autoScrollToNextQuest(questNum){

        $('html, body').animate({
            scrollTop: $("#buttons-next-quest").offset().top
        }, 600);
        $(String("#question-" + questNum + " .input-quest")).focus();

    }

</script>

    <!---------------------- AutoScroll MOVE UP DOWN Javascript ------------------------>


<script type="text/javascript">

    function autoScrollQuestUpDown(id){

        $('html, body').animate({
            scrollTop: $(String("#" + id)).offset().top - 239
        }, 300);

    }

</script>


<script type="text/javascript">

    function UploadMCP(questNum) {

        var fileInput = document.getElementById(String("mcp-add-pics-" + questNum));
        var currNumOfOpt = document.getElementById(String("mcp-append-opt-here-" + questNum)).childElementCount;


            var fileDisplayArea;


                var newNumOpt = fileInput.files.length + currNumOfOpt;

                if (newNumOpt < 5) {
                    for (i=0; i < fileInput.files.length;i++){
                        currNumOfOpt++;
                        var file = fileInput.files[i];
                        var imageType = /image.*/;

                        if (file.type.match(imageType)) {
                                $("#mcp-option-0-q-0").clone().appendTo(String("#mcp-append-opt-here-" + questNum));
                                $(String("#mcp-append-opt-here-" + questNum + ">div:nth-child(" + currNumOfOpt + ")")).attr("id",String("mcp-option-" + currNumOfOpt + "-q-" + questNum));
                                $(String("#mcp-option-" + currNumOfOpt + "-q-" + questNum + ">span>input")).attr("name",String("mcp-pic-" + questNum));
                                $(String("#mcp-option-" + currNumOfOpt + "-q-" + questNum + " .mcp-pic-panel>div:first-child")).attr("id",String("mcp-picHolder-" + currNumOfOpt + "-q-" + questNum));
                                $(String("#mcp-option-" + currNumOfOpt + "-q-" + questNum + ">span:nth-child(2)")).text(String("Option " + currNumOfOpt));
                                $(String("#mcp-picHolder-" + currNumOfOpt + "-q-" + questNum + ">a")).attr("href", String("javascript:RemoveOption(" + currNumOfOpt + "," + questNum + ")"));


                            fileDisplayArea = document.getElementById(String("mcp-picHolder-" + currNumOfOpt + "-q-" + questNum));
                            }

                            setup_reader(file,fileDisplayArea,currNumOfOpt,questNum)

                    }

                }else{
                    window.alert("You may only upload a maximum of 4 images for each question. Please, try again.")

                }

                if (document.getElementById(String("mcp-append-opt-here-" + questNum)).childElementCount > 3){
                    $(String("#question-" + questNum + " .fileUpload")).attr("disabled","disabled");

                }
    }

    function setup_reader(file,picHolder,opt,quest) {
        var reader = new FileReader();
        reader.onload = function(e) {
            var img = new Image();
            // Set the img src property using the data URL.
            img.src = e.target.result;
            // Add the image to the page.
            picHolder.appendChild(img);
            $(String("#mcp-option-" + opt + "-q-" + quest)).removeAttr("hidden");
        }
        reader.readAsDataURL(file);
    }

</script>

<script type="text/javascript">

function UploadLabelImage(questNum){

        var fileInput = document.getElementById(String("fileInputLab-" + questNum));
        var fileDisplayArea = document.getElementById(String("fileDisplayArea-" + questNum));

            var file = fileInput.files[0];
            var imageType = /image.*/;

            if (file.type.match(imageType)) {

                var reader = new FileReader();
                reader.onload = function(e) {

                    // Create a new image.
                    var img = new Image();
                    // Set the img src property using the data URL.
                    img.src = reader.result;
                    img.style.borderRadius = "10px";
                    img.style.width = "100%";

                    // Add the image to the page.
                    fileDisplayArea.appendChild(img);
                    $(String("#question-" + questNum + " .my-quest-panel-ans>div")).show();

                    img.addEventListener("dblclick", function () {drawLabel(img,questNum)});

                }

                reader.readAsDataURL(file);
            } else {
                fileDisplayArea.innerHTML = "File not supported!";
            }
         }

</script>


<script type="text/javascript">

    function drawLabel(image,questNum){
        var origin = getClickPosition(image);
        var xclicked = origin.x;
        var yclicked = origin.y;
        var totYOffset = origin.z;
        var totXOffset = origin.w;

        $("#label-0-q-0").clone().appendTo(String("#append-labels-here-" + questNum));
        var optNum = document.getElementById(String("append-labels-here-" + questNum)).childElementCount;
        $(String("#question-" + questNum +  " #label-0-q-0")).attr("id",String("label-" + optNum + "-q-" + questNum));
        var chr = String.fromCharCode(64 + optNum);
        $(String("#label-" + optNum + "-q-" + questNum+ ">div:first-child>span:first-child")).text(chr);

        var line = document.createElement('div');
        document.getElementById(String("append-lines-here-" + questNum)).appendChild(line);

        $(String("#append-lines-here-" + questNum + ">div:nth-child(" + optNum + ")")).attr("id",String("line-" + optNum + "-q-" + questNum));
        $(String("#label-" + optNum + "-q-" + questNum)).css({"top":yclicked - 9 ,"left":xclicked + 140});
        $(String("#label-" + optNum + "-q-" + questNum)).removeAttr("hidden");

        var x2 = parseInt($(String("#label-" + optNum + "-q-" + questNum)).css("left")) - 90;
        $(String("#line-" + optNum + "-q-" + questNum)).css({top: yclicked - 2, left: xclicked + 80});
        $(String("#line-" + optNum + "-q-" + questNum)).width(Math.abs(x2-xclicked));



        $(function() {
            $(String("#label-" + optNum + "-q-" + questNum)).draggable({containment:$(String("#questNumion-" + questNum + " .my-quest-panel-ans")),
                drag: function(){
                    var x1 = xclicked;
                    var y1 = yclicked;
                    var x2 = parseInt($(String("#label-" + optNum + "-q-" + questNum)).css("left"));
                    var y2 = parseInt($(String("#label-" + optNum + "-q-" + questNum)).css("top")) + 10;

                    if (x2 > x1 + 100 ){
                        x2 = x2 - 90;
                    } else if (x2 <= x1 + 120 && x2 >= x1 - 120){
                        if (y1 > y2 + 20 ){
                            y2 = y2 + 18;
                            x2 = x2 + 10
                        } else if (y1 < y2 -20){
                            y2 = y2 - 18;
                            x2 = x2 + 10
                        }
                    } else {
                        x2 = x2 + 105
                    }

                    var hypotenuse = Math.sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2));
                    var angle = Math.atan2((y1-y2), (x1-x2)) *  (180/Math.PI);

                    if(angle >= 90 && angle < 180){
                        y1 = y1 - (y1-y2);
                    }
                    if(angle > 0 && angle < 90){
                        x1 = x1 - (x1-x2);
                        y1 = y1 - (y1-y2);
                    }
                    if(angle <= 0 && angle > -90){
                        x1 = x1 - (x1-x2);
                    }

                    $(String("#line-" + optNum + "-q-" + questNum)).queue(function(){
                    $(this).offset({top: y1 + totYOffset - 2, left: x1 + totXOffset - 1});
                    $(this).dequeue();
                    }).queue(function(){
                    $(this).width(hypotenuse);
                    $(this).dequeue();
                    }).queue(function(){
                    $(this).rotate(angle);
                    $(this).dequeue();
                    });

                },

                start: function(){
                    $(String("#label-" + optNum + "-q-" + questNum)).css("opacity",".5");
                },
                stop: function(){
                    $(String("#label-" + optNum + "-q-") + questNum).css("opacity","1");

                }

            });
        });

    }


    function getClickPosition(image) {
        var parentPosition = getPosition(image);
        var xPosition = event.clientX - parentPosition.x;
        var yPosition = event.clientY - parentPosition.y;
        var totYOffset = parentPosition.z;
        var totXOffset = parentPosition.w;
    return {x: xPosition , y: yPosition, z: totYOffset, w: totXOffset}

    }


    function getPosition(element) {
    var xPosition = 0;
    var yPosition = 0;
    var totYOffset = 0;
    var totXOffset = 0;

        while (element) {
            xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);
            yPosition += (element.offsetTop - element.scrollTop + element.clientTop);
            totYOffset = totYOffset + element.offsetTop;
            totXOffset = totXOffset + element.offsetLeft;
            element = element.offsetParent;
        }
        return { x: xPosition, y: yPosition, z: totYOffset, w: totXOffset};

    }
</script>



</body>

<!-- Bootstrap core JavaScript
     ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>-->
<script src="../js/bootstrap.min.js"></script>
<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200" preserveAspectRatio="none" style="visibility: hidden; position: absolute; top: -100%; left: -100%;"><defs></defs><text x="0" y="10" style="font-weight:bold;font-size:10pt;font-family:Arial, Helvetica, Open Sans, sans-serif;dominant-baseline:middle">200x200</text></svg>
</html>